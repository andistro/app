#!/bin/bash
source "$PREFIX/var/lib/andistro/lib/share/global" # Fonte modular configuração global
# Pergunta para abrir o AnDistro
label_open_app_desc=$(printf "$label_open_app_desc" "AnDistro")
echo -e "\e[1;33m$label_open_app_desc\e[0m"

# CTRL+C → cancelar de forma clara
trap 'echo -e "\n\e[1;32m$label_cancel_action_ctrlc\e[0m"; exit 0' INT
read -s -n1 tecla
trap INT  # Remove o trap imediatamente após read

# ENTER → executa
if [[ -z "$tecla" || "$tecla" == $'\r' || "$tecla" == $'\n' ]]; then
    label_opening=$(printf "$label_opening" "AnDistro")
    echo -e "\n\e[1;32m$label_opening\e[0m"
    echo -e "\n\e[1;32m$label_continue_action_executed\e[0m"
    echo -e "\e[1;32m$label_action_accepted\n\n$label_app_not_open\e[0m"
    andistro
fi

# ESC → cancela com mensagem
if [[ "$tecla" == $'\x1b' ]]; then
    echo -e "\n\e[1;32m$label_cancel_action_esc\e[0m"
fi

exit 0
# Qualquer outra tecla → não confirma nem cancela, só volta silenciosamente
# (nenhum echo, nenhum diálogo, apenas fim do script)
